# ShiftLang

A lightweight background tool that instantly translates selected text between any two languages with a single hotkey.

## Features

- **Any-to-any translation** — supports 130+ languages via Google Translate
- **AI-powered translation** — use OpenRouter LLM for more accurate translations (optional)
- **Hotkey-driven** — press a hotkey to translate any selected text in-place
- **Auto language detection** — detects the input language and translates accordingly
- **Clipboard-safe** — translated text is excluded from Windows Clipboard History
- **Cross-platform** — works on Windows, macOS, and Linux (X11 & Wayland)
- **One-command install** — single command to set up everything
- **Virtual environment** — isolated Python dependencies (no system-wide installs)
- **Reconfigurable** — change settings anytime without reinstalling

## Requirements

- **Python 3.8+**
- **git** (to clone the repository)

## Quick Install

### One-Liner Install

**Windows (PowerShell):**
```powershell
irm https://raw.githubusercontent.com/TUNA-NOPE/ShiftLang/main/install.ps1 | iex
```

**macOS / Linux:**
```bash
curl -fsSL https://raw.githubusercontent.com/TUNA-NOPE/ShiftLang/main/install-remote.sh | bash
```

This will automatically:
- Clone the repository to `~/ShiftLang`
- Run the interactive installer
- Set up everything for you

### Manual Install

#### Windows (PowerShell)

```powershell
git clone https://github.com/TUNA-NOPE/ShiftLang.git; cd ShiftLang; python install.py
```

#### macOS / Linux (Terminal)

```bash
git clone https://github.com/TUNA-NOPE/ShiftLang.git && cd ShiftLang && ./install.sh
```

The installer will automatically:
1. Check your Python version and git
2. Create a virtual environment (uses `uv` if available, otherwise `venv`)
3. Install all dependencies into the isolated environment
4. Guide you through a preferences questionnaire:
   - **Language selection** (choose 2 languages)
   - **Translation provider** (Google Translate or OpenRouter AI)
   - **Auto-start preference**
   - **Hotkey configuration**
5. Configure everything for you

## Usage

1. Select any text in any application.
2. Press your configured hotkey (default: **Ctrl+Shift+Q**).
3. The selected text is replaced with its translation.

## Translation Providers

ShiftLang supports two translation providers (you can choose during installation):

### Google Translate (Default)
- ✓ Very fast (instant)
- ✓ Free, unlimited
- ✓ No setup required
- ✓ 130+ languages
- Best for general use

### OpenRouter AI
- ✓ More accurate translations
- ✓ Better context understanding
- ✓ AI-powered (uses `openrouter/free` model)
- ✓ Free tier available (optional API key for higher limits)
- Best for important or complex translations

### Choosing Your Provider

**During installation:**
The installer will ask which provider you want to use.

**After installation:**
Edit your `config.json` to switch providers:

```json
{
  "hotkey": "ctrl+shift+q",
  "auto_start": true,
  "source_language": "english",
  "target_language": "hebrew",
  "translation_provider": "openrouter",
  "openrouter_api_key": ""
}
```

**Note:** The `openrouter_api_key` field is optional. The free tier works without an API key, but you can get an API key from [OpenRouter](https://openrouter.ai/) for higher rate limits.

## Reconfigure Settings

To change your languages, hotkey, or auto-start preference without reinstalling:

```bash
# Windows
python install.py --reconfigure

# macOS / Linux
python3 install.py --reconfigure
```

Short form: `python install.py -r`

## Manual Run

If you chose not to enable auto-start, run ShiftLang manually:

```bash
# Windows
.venv\Scripts\python.exe main.py

# macOS / Linux
.venv/bin/python main.py
```

> **Note:** On Windows, run as administrator if the hotkey doesn't register in elevated windows.

### Wayland Users (Linux)

On Wayland sessions, ShiftLang uses a dedicated implementation with improved clipboard handling:

```bash
.venv/bin/python shiftlang_wayland.py
```

## Project Structure

```
ShiftLang/
├── main.pyw                 # Main application (Windows/macOS/X11)
├── shiftlang_wayland.py     # Wayland-optimized implementation (Linux)
├── shiftlang/               # Core shared modules
│   ├── __init__.py          # Package exports
│   ├── config.py            # Configuration management
│   ├── language.py          # Language detection utilities
│   └── translator.py        # Translator factory
├── openrouter_translator.py # OpenRouter AI provider
├── install.py               # Interactive installer + reconfigure
├── install.sh               # Bash wrapper for install.py
├── install-remote.sh        # Remote one-liner installer (macOS/Linux)
├── install.ps1              # Remote one-liner installer (Windows)
├── apply_autostart.py       # Autostart utility
├── config.json              # User preferences (generated by installer)
├── requirements.txt         # Python dependencies
├── requirements-linux.txt   # Linux-specific dependencies
├── .venv/                   # Virtual environment (auto-created)
└── README.md
```

## Dependencies

| Package           | Purpose                          |
|-------------------|----------------------------------|
| `keyboard`        | Global hotkey registration       |
| `pyperclip`       | Cross-platform clipboard access  |
| `deep-translator` | Google Translate API wrapper     |
| `requests`        | HTTP client for OpenRouter API   |

### System Requirements

- **Wayland (Linux)**: Requires `wl-clipboard` package for clipboard operations
  - Ubuntu/Debian: `sudo apt install wl-clipboard`
  - Fedora: `sudo dnf install wl-clipboard`
  - Arch: `sudo pacman -S wl-clipboard`

## License

This project is open source and available under the [MIT License](LICENSE).
